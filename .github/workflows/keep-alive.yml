name: ğŸš€ Keep Bot Alive (Anti Cold Start)

on:
  schedule:
    # Executa a cada 5 minutos para manter o servidor ativo
    - cron: '*/5 * * * *'
  workflow_dispatch: # Permite execuÃ§Ã£o manual
  
jobs:
  keep-alive:
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ¥ Health Check Ping
      run: |
        echo "ğŸš€ Executando ping para manter servidor ativo..."
        echo "â° HorÃ¡rio: $(date)"
        
        # Ping para o endpoint otimizado
        response=$(curl -s -o /dev/null -w "%{http_code}" \
          --max-time 15 \
          --retry 2 \
          --retry-delay 3 \
          https://ohvips.xyz/ping)
        
        if [ "$response" = "200" ]; then
          echo "âœ… Servidor ativo! Status: $response"
        else
          echo "âš ï¸ Resposta inesperada: $response"
        fi
        
    - name: ğŸ¤– Bot Status Check
      run: |
        echo "ğŸ¤– Verificando status do bot..."
        
        # Ping adicional para endpoint do bot (se existir)
        bot_response=$(curl -s -o /dev/null -w "%{http_code}" \
          --max-time 30 \
          --retry 1 \
          https://ohvips.xyz/debug/status || echo "timeout")
        
        if [ "$bot_response" = "200" ]; then
          echo "âœ… Bot endpoint ativo! Status: $bot_response"
        else
          echo "â„¹ï¸ Bot endpoint status: $bot_response (normal se nÃ£o existir)"
        fi
        
    - name: ğŸ“Š Ping Summary
      run: |
        echo "ğŸ“Š RESUMO DO PING:"
        echo "ğŸ• Executado em: $(date)"
        echo "ğŸ¯ Objetivo: Evitar cold starts no Render.com"
        echo "â±ï¸ PrÃ³ximo ping em: 5 minutos"
        echo "ğŸ”„ FrequÃªncia: 288 pings/dia"
