<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title id="dynamic-title">Carregando...</title>
  <meta name="robots" content="noindex, nofollow" />

  <script src="env.js"></script>

  <link rel="stylesheet" href="style.css" />
  <script src="config.js"></script>
  <script src="utm-capture.js"></script>
</head>
<body>
  <div class="overlay">
    <div id="message">
        <p>Antes que feche esse quartinho...</p>
      <p>Tem umas coisinhas bem íntimas te esperando... Vai entrar ou vai ficar babando do lado de fora?</p>
    </div>
    <a id="cta" class="btn btn-pastel" href="#">Carregando botão...</a>
  </div>

  <script>
    // Aplica conteúdo da config
    document.title = window.config.title;
    // texto fixo definido no HTML

    const cta = document.getElementById("cta");
    cta.innerText = window.config.buttonText;
    const params = new URLSearchParams(window.location.search);
    const rKey = params.get('redirect') || 'redirect1';
    const redirectLink = (window.envVars && window.envVars.redirects && window.envVars.redirects[rKey]) || window.config.redirectLink;
    cta.href = redirectLink;

    // Evento de clique com redirecionamento direto
    cta.addEventListener("click", function () {
      fbq('track', 'ViewContent', {
        content_name: window.config.headline,
        content_category: 'Bot Telegram'
      });
    });

    // Aplica imagem de fundo
    document.body.style.backgroundImage = `url('${window.config.backgroundImage}')`;
  </script>

</body>
</html>
